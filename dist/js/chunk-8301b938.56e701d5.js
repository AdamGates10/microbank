(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8301b938","chunk-69b05ece"],{"1fac":function(t,e,a){"use strict";var r=function(t){return{all:t=t||new Map,on:function(e,a){var r=t.get(e);r?r.push(a):t.set(e,[a])},off:function(e,a){var r=t.get(e);r&&(a?r.splice(r.indexOf(a)>>>0,1):t.set(e,[]))},emit:function(e,a){var r=t.get(e);r&&r.slice().map((function(t){t(a)})),(r=t.get("*"))&&r.slice().map((function(t){t(e,a)}))}}},n=r();e["a"]=n},2909:function(t,e,a){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function n(t){if(Array.isArray(t))return r(t)}a.d(e,"a",(function(){return i}));a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),a("a630");function s(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}a("fb6a"),a("b0c0"),a("ac1f"),a("00b4");function o(t,e){if(t){if("string"===typeof t)return r(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?r(t,e):void 0}}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(t){return n(t)||s(t)||o(t)||c()}},"35aa":function(t,e,a){"use strict";a("61d2")},3661:function(t,e,a){},"61d2":function(t,e,a){},"67b4":function(t,e,a){"use strict";a("3661")},6868:function(t,e,a){},ae65:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[t.response?[t.customer?a("v-card",{attrs:{tile:"",flat:""}},[a("v-card-text",[a("v-row",{attrs:{align:"center"}},[a("v-col",{attrs:{cols:"12",lg:"6"}},[a("v-breadcrumbs",{staticClass:"pl-0",attrs:{large:"",items:t.breadcrumbs}})],1)],1),a("v-row",{attrs:{align:"center"}},[a("v-col",{attrs:{cols:"12",lg:"5"}},[a("v-avatar",{attrs:{size:"250",tile:""}},[a("img",{attrs:{src:t.customer.avatar_url,alt:""}})])],1),a("v-col",{attrs:{cols:"12",lg:"7"}},[a("v-list",{staticClass:"pt-0"},[a("v-list-item",{staticClass:"text-h4",domProps:{textContent:t._s(t.customer.other_names+" "+t.customer.last_name)}}),a("v-list-item",[a("v-list-item-icon",[a("v-icon",[t._v(" mdi-calendar-account-outline ")])],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{innerHTML:t._s(""+t.moment(t.customer.dob).format("Do MMMM YYYY"))}})],1)],1),a("v-list-item",[a("v-list-item-icon",[a("v-icon",[t._v(" mdi-home-map-marker ")])],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{innerHTML:t._s(""+t.customer.address)}})],1)],1),a("v-list-item",[a("v-list-item-icon",[a("v-icon",[t._v(" mdi-phone ")])],1),a("v-list-item-content",[a("v-list-item-title",[a("span",[t._v(" "+t._s(t.customer.mobile_number_1)+" ")]),t.customer.mobile_number_2?a("span",[t._v(" "+t._s(t.customer.mobile_number_2)+" ")]):t._e()])],1)],1),a("v-list-item",[a("v-list-item-icon",[a("v-icon",[t._v(" mdi-account-plus-outline ")])],1),a("v-list-item-content",[a("v-list-item-title",[a("span",[t._v(" "+t._s(t.customer.staff.name)+" ")])])],1)],1)],1)],1)],1)],1),a("v-tabs",{attrs:{"align-with-title":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[t._l(t.tabItems,(function(e){return a("v-tab",{key:e},[t._v(" "+t._s(e)+" ")])})),a("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab-item",[a("UserDetails",{scopedSlots:t._u([{key:"name",fn:function(){return[t._v(" "+t._s(t.customer.other_names+" "+t.customer.last_name)+" ")]},proxy:!0},{key:"dob",fn:function(){return[t._v(" "+t._s(""+t.moment(t.customer.dob).format("Do MMMM YYYY"))+" ")]},proxy:!0},{key:"address",fn:function(){return[a("div",{staticClass:"text-wrap"},[t._v(" "+t._s(""+t.customer.address)+" ")])]},proxy:!0},{key:"mobile_number",fn:function(){return[a("span",[t._v(" "+t._s(t.customer.mobile_number_1)+" ")]),t.customer.mobile_number_2?a("span",[t._v(" "+t._s(t.customer.mobile_number_2)+" ")]):t._e()]},proxy:!0},{key:"next_of_kin",fn:function(){return[t._v(" "+t._s(""+t.customer.next_of_kin)+" ")]},proxy:!0},{key:"kin_dob",fn:function(){return[t._v(" "+t._s(""+t.moment(t.customer.kin_dob).format("Do MMMM YYYY"))+" ")]},proxy:!0},{key:"kin_mobile_number",fn:function(){return[a("span",[t._v(" "+t._s(t.customer.kin_mobile_number_1)+" ")]),t.customer.kin_mobile_number_2?a("span",[t._v(" "+t._s(t.customer.kin_mobile_number_2)+" ")]):t._e()]},proxy:!0}],null,!1,3327897892)})],1),a("v-tab-item",[a("UserAccount")],1)],1)],2)],1):a("v-alert",{attrs:{prominent:"",type:"error"}},[t._v(" No Customer Found... ")])]:t._e(),a("v-overlay",{attrs:{absolute:"",opacity:"1"},model:{value:t.overlay,callback:function(e){t.overlay=e},expression:"overlay"}},[a("v-progress-circular",{attrs:{size:"64",indeterminate:""}})],1)],2)},n=[],s=a("5530"),o=(a("b0c0"),a("d3b7"),a("99af"),a("ed09")),c=a("8d7e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-simple-table",[a("tbody",[a("tr",[a("td",[t._v("Agent Name")]),a("td",[t._t("agent_name")],2)]),a("tr",[a("td",[t._v("Name")]),a("td",[t._t("name")],2)]),a("tr",[a("td",[t._v("Date of Birth")]),a("td",[t._t("dob")],2)]),a("tr",[a("td",[t._v("Address")]),a("td",[t._t("address")],2)]),a("tr",[a("td",[t._v("Mobile Number")]),a("td",[t._t("mobile_number")],2)]),a("tr",[a("td",[t._v("Next Of Kin")]),a("td",[t._t("next_of_kin")],2)]),a("tr",[a("td",[t._v("Next Of Kin Mobile Number")]),a("td",[t._t("kin_mobile_number")],2)]),a("tr",[a("td",[t._v("Next Of Kin Date of Birth")]),a("td",[t._t("kin_dob")],2)])])])],1)},l=[],u=(a("67b4"),a("2877")),m={},v=Object(u["a"])(m,i,l,!1,null,"439d3d32",null),d=v.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},t._l(t.accounts,(function(e,r){return a("div",{key:"account"+r},[a("v-card",{staticClass:"mb-2",attrs:{tile:"",outlined:"",rounded:"0"}},[a("v-toolbar",{attrs:{color:"primary",dark:"",outlined:"",elevation:"0"}},[a("v-toolbar-title",[t._v(" "+t._s(r)+" Account ")]),a("v-spacer"),a("v-toolbar-title",[t._v(" "+t._s(e.length)+" "+t._s(e.length>1?"Accounts":"Account")+" ")])],1),a("v-card-text",t._l(e,(function(e,n){return a("div",{key:"div"+n},[a("v-list",[a("v-list-item",[a("v-list-item-content",[a("v-card",{attrs:{outlined:""}},[a("v-card-text",[a("v-row",{attrs:{align:"center"}},[a("v-col",[a("v-list-item-title",[t._v("Account Number ")]),a("v-list-item-subtitle",[t._v(" "+t._s(e.acc)+" ")])],1),a("v-col",[a("v-list-item-title",[t._v(" Date Created ")]),a("v-list-item-subtitle",[t._v(" "+t._s(t.moment(e.created).format("Do MMMM YYYY"))+" ")])],1),a("v-col",{staticClass:"text-right",attrs:{cols:"12",lg:"2"}},[a("v-list-item-title",[a("v-btn",{attrs:{"x-large":"",color:"success",icon:""},on:{click:function(a){return t.viewTransaction(e.acc,r)}}},[a("v-icon",{attrs:{"x-large":""}},[t._v("mdi-bank-transfer")])],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)})),0)],1)],1)})),0)},_=[],f=a("1fac"),p=Object(o["c"])({setup:function(){var t=Object(c["b"])(["customer"]),e=t.customer,a=Object(o["h"])({accounts:[],window:0}),r=Object(o["j"])(a),n=r.accounts;Object(o["f"])((function(){n.value=e.value.accounts.reduce((function(t,e){var a=e.account_name;return t[a]||(t[a]=[]),t[a].push({acc:e.customer_account.account_number,created:e.customer_account.created_at}),t}),{})}));var i=function(t,e){f["a"].emit("view-customer-transaction",{number:t,type:e})};return Object(s["a"])(Object(s["a"])({customer:e},Object(o["j"])(a)),{},{viewTransaction:i})}}),g=p,C=(a("eeb3"),Object(u["a"])(g,b,_,!1,null,"10c9a6e0",null)),h=C.exports,y=Object(o["c"])({components:{UserDetails:d,UserAccount:h},setup:function(t,e){var a=Object(c["a"])(["getCustomer"]),r=a.getCustomer,n=Object(c["b"])(["customer"]),i=n.customer,l=Object(o["e"])("customerId"),u=Object(o["h"])({overlay:!0,pageTitle:e.root.$route.name,breadcrumbs:[],tab:null,tabItems:["Customer Details","Account Details"],response:!1}),m=Object(o["j"])(u),v=m.overlay,d=m.breadcrumbs,b=m.response;r(l.value).then((function(){d.value=[{text:"Customer List",disabled:!1,href:"/user_management/customerlist"},{text:"".concat(i.value.other_names," ").concat(i.value.last_name),disabled:!0}]})).finally((function(){v.value=!1,b.value=!0}));var _=function(){};return Object(s["a"])({customer:i,editCustomer:_},Object(o["j"])(u))}}),w=y,k=Object(u["a"])(w,r,n,!1,null,null,null);e["default"]=k.exports},ccab:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("PageHeader",[a("span",{staticClass:"font-weight-bold",attrs:{slot:"header"},slot:"header"},[t._v("CUSTOMER ")]),t._v(" LIST ")]),a("v-row",[a("v-col",[a("v-btn",{staticClass:"ma-2 font-weight-bold",attrs:{color:"primary"},on:{click:t.addnewCustomer}},[t._v(" CREATE NEW CUSTOMER ")])],1)],1),a("v-row",[a("v-col",[a("v-data-table",{staticClass:"elevation-2",attrs:{"fixed-header":"",headers:t.headers,items:t.items,loading:t.isLoaded,"item-key":"id","disable-pagination":"","hide-default-footer":""},scopedSlots:t._u([{key:"item.basic",fn:function(e){var r=e.item;return[a("div",{staticClass:"subtitle-1",domProps:{textContent:t._s(r.other_names+" "+r.last_name)}})]}},{key:"item.contact",fn:function(e){var r=e.item;return[a("div",{staticClass:"subtitle-1",domProps:{textContent:t._s(""+r.mobile_number_1)}})]}},{key:"item.actions",fn:function(e){var r=e.item;return[a("v-menu",{attrs:{"offset-y":"","open-on-hover":"",transition:"slide-x-transition",bottom:"",right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,n=e.attrs;return[a("v-btn",t._g(t._b({attrs:{small:"",outlined:"",color:"grey darken-1"}},"v-btn",n,!1),r),[a("v-icon",[t._v("mdi-dots-horizontal")])],1)]}}],null,!0)},[a("v-list",{staticClass:"py-0",attrs:{dark:"",color:"primary darken-2","min-width":"250",tile:""}},[a("v-list-item-group",[a("v-list-item",{attrs:{link:""},on:{click:function(e){return t.viewCustomerBtn(r)}}},[a("v-list-item-content",[a("v-list-item-title",[t._v("View Customer Details")])],1),a("v-list-item-icon",[a("v-icon",[t._v("mdi-arrow-right")])],1)],1)],1)],1)],1)]}},{key:"no-data",fn:function(){return[a("span",{staticClass:"subheading font-weight-bold"},[t._v("Not available")])]},proxy:!0}])}),t.getters_customers.length?a("v-card",{directives:[{name:"intersect",rawName:"v-intersect",value:t.intersected,expression:"intersected"}]},[t.loadingScroll?a("v-progress-linear",{attrs:{indeterminate:!0}}):t._e()],1):t._e()],1)],1),a("v-navigation-drawer",{staticClass:"shadow",attrs:{"overlay-color":"black",fixed:"",permanent:t.openCustomer,right:"",width:"50%",clipped:""},model:{value:t.openCustomer,callback:function(e){t.openCustomer=e},expression:"openCustomer"}},[a("div",{staticClass:"mt-15 d-flex justify-space-between"},[a("v-spacer"),a("v-btn",{staticClass:"ma-2",attrs:{icon:"",to:"/user_management/customerlist"},on:{click:function(e){return t.closeDrawer()}}},[a("v-icon",[t._v("mdi-close-circle")])],1)],1),!0===t.openCustomer?a("ViewCustomer"):t._e()],1),a("v-navigation-drawer",{staticClass:"shadow",attrs:{fixed:"",permanent:t.editCustomer,right:"",width:"70%",clipped:""},model:{value:t.editCustomer,callback:function(e){t.editCustomer=e},expression:"editCustomer"}},[a("div",{staticClass:"mt-15 d-flex justify-space-between"},[t.basket.length>1?a("v-btn",{staticClass:"ma-2",attrs:{icon:""},on:{click:function(e){t.editCustomer=!t.editCustomer,t.basket.pop()}}},[a("v-icon",[t._v("mdi-arrow-left-bold-circle")])],1):t._e(),a("v-spacer"),a("v-btn",{staticClass:"ma-2",attrs:{icon:""},on:{click:function(e){return t.closeDrawer()}}},[a("v-icon",[t._v("mdi-close-circle")])],1)],1),t.editCustomer?a(t.componentCurrent,{tag:"component"}):t._e()],1),a("v-navigation-drawer",{staticClass:"shadow",attrs:{clipped:"","overlay-color":"black",fixed:"",permanent:t.newCustomer,right:"",width:"70%"},model:{value:t.newCustomer,callback:function(e){t.newCustomer=e},expression:"newCustomer"}},[a("div",{staticClass:"mt-15 d-flex justify-space-between"},[a("v-spacer"),a("v-btn",{staticClass:"ma-2",attrs:{icon:"",to:"/user_management/customerlist"},on:{click:function(e){return t.closeDrawer()}}},[a("v-icon",[t._v("mdi-close-circle")])],1)],1),t.newCustomer?a("NewCustomer"):t._e()],1),a("v-navigation-drawer",{staticClass:"shadow",attrs:{clipped:"","overlay-color":"black",fixed:"",permanent:t.customerTransaction,right:"",width:"50%"},model:{value:t.customerTransaction,callback:function(e){t.customerTransaction=e},expression:"customerTransaction"}},[a("div",{staticClass:"mt-15 d-flex justify-space-between"},[t.basket.length>1?a("v-btn",{staticClass:"ma-2",attrs:{icon:""},on:{click:function(e){t.customerTransaction=!t.customerTransaction,t.basket.pop()}}},[a("v-icon",[t._v("mdi-arrow-left-bold-circle")])],1):t._e(),a("v-spacer"),a("v-btn",{staticClass:"ma-2",attrs:{icon:"",to:"/user_management/customerlist"},on:{click:function(e){return t.closeDrawer()}}},[a("v-icon",[t._v("mdi-close-circle")])],1)],1),t.customerTransaction?a("ViewCustomerTransaction"):t._e()],1)],1)},n=[],s=a("5530"),o=a("2909"),c=(a("d3b7"),a("b0c0"),a("6062"),a("3ca3"),a("ddb0"),a("99af"),a("ac1f"),a("5319"),a("b2cf")),i=a("ae65"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-overlay",{attrs:{absolute:"",value:t.overlay}},[a("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1),t.overlay?t._e():[a("v-toolbar",{attrs:{color:"primary",dark:"",elevation:"1",rounded:""}},[t._v(" "+t._s(t.customer.other_names+" "+t.customer.last_name)+" "),a("v-spacer"),a("span",{domProps:{textContent:t._s(t.currentAccType+" Account")}}),a("v-icon",[t._v("mdi-circle-small")]),a("span",{domProps:{textContent:t._s(""+t.currentAccNumber)}})],1),a("v-row",[a("v-col",[a("v-data-table",{staticClass:"elevation-1",attrs:{tile:"",headers:t.headers,items:t.items,loading:t.isLoaded,"item-key":"id","disable-pagination":"","hide-default-footer":""},scopedSlots:t._u([{key:"item.created_at",fn:function(e){var a=e.value;return[t._v(" "+t._s(t.moment(a).format("Do MMMM YYYY, h:mm:ss a"))+" ")]}},{key:"no-data",fn:function(){return[a("span",{staticClass:"subheading font-weight-bold"},[t._v("Not available")])]},proxy:!0}],null,!1,1907936731)}),t.getters_customer_transaction.length?a("v-card",{directives:[{name:"intersect",rawName:"v-intersect",value:t.intersected,expression:"intersected"}]},[t.loadingScroll?a("v-progress-linear",{attrs:{indeterminate:!0}}):t._e()],1):t._e()],1)],1)]],2)},u=[],m=a("ed09"),v=a("8d7e"),d=Object(m["c"])({setup:function(){var t=Object(m["e"])("currentAccNumber"),e=Object(m["e"])("currentAccType"),a=Object(v["a"])(["getCustomerTransaction"]),r=a.getCustomerTransaction,n=Object(v["b"])(["getters_customer_transaction","getters_customer_transaction_meta","customer"]),c=n.getters_customer_transaction,i=n.getters_customer_transaction_meta,l=n.customer,u=Object(m["h"])({overlay:!0,loadingScroll:!1,page:1,isIntersecting:!1,items:[],headers:[{text:"CREDIT",value:"credit"},{text:"DEBIT",value:"debit"},{text:"BALANCE",value:"balance"},{text:"DATE",value:"created_at"}],isLoaded:!0}),d=Object(m["j"])(u),b=d.overlay,_=d.loadingScroll,f=d.page,p=d.isIntersecting,g=d.items,C=d.isLoaded;r({page:f.value,acc_number:t.value}).then((function(){g.value=c.value,b.value=!1})).finally((function(){return C.value=!1}));var h=function(e){p.value=e[0].isIntersecting,p.value?i.value.current_page>=i.value.last_page?_.value=!1:(f.value++,r({page:f.value,acc_number:t.value}).then((function(){_.value=!1,g.value=Object(o["a"])(new Set([].concat(Object(o["a"])(c.value),Object(o["a"])(g.value))))}))):_.value=!0};return Object(s["a"])(Object(s["a"])({},Object(m["j"])(u)),{},{getters_customer_transaction:c,intersected:h,currentAccNumber:t,currentAccType:e,customer:l})}}),b=d,_=a("2877"),f=Object(_["a"])(b,l,u,!1,null,null,null),p=f.exports,g=a("2b6f"),C=a("68fa"),h=a("126e"),y=a("1fac"),w={components:{PageHeader:c["a"],ViewCustomer:i["default"],NewCustomer:C["default"],Response:g["a"],ViewCustomerTransaction:p},props:["id"],setup:function(t,e){var a=Object(m["h"])({customerTransaction:!1,componentCurrent:null,openCustomer:!1,editCustomer:!1,newCustomer:!1,roleCustomer:!1,isIntersecting:!1,items:[],page:1,isLoaded:!0,headers:[{text:"CUSTOMER",value:"basic",sortable:!0},{text:"CONTACT",value:"contact",sortable:!0},{text:"ACTIONS",value:"actions",sortable:!1,align:"right"}],staffName:null,levelItem:"",deleteResponse:!1,absolute:!0,newFacultyText:"",basket:[{department_id:null,department_name:"",faculty_number:null}],loadingScroll:!1,basketDrawer:[],currentId:null,currentAccNumber:null,currentAccType:null}),r=Object(v["a"])(["customerList"]),n=r.customerList,c=Object(v["b"])(["getters_customers","getters_customers_meta"]),i=c.getters_customers,l=c.getters_customers_meta,u=Object(m["j"])(a),d=u.page,b=u.isIntersecting,_=u.loadingScroll,f=u.isLoaded,p=u.items,g=u.openCustomer,C=u.basket,w=u.currentId,k=u.editCustomer,j=u.newCustomer,x=u.roleCustomer,O=u.staffName,T=u.customerTransaction,A=u.currentAccNumber,M=u.currentAccType;n(d.value).then((function(){if(f.value=!1,p.value=i.value,t.id){switch(e.root.$route.name){case"Customer":g.value=!0;break;default:break}w.value=t.id}})).finally((function(){setTimeout((function(){switch(e.root.$route.name){case"AddCustomer":j.value=!0;break;default:break}}))}));var N=function(t){b.value=t[0].isIntersecting,b.value?l.value.current_page>=l.value.last_page?_.value=!1:(d.value++,n(d.value).then((function(){_.value=!1,p.value=Object(o["a"])(new Set([].concat(Object(o["a"])(i.value),Object(o["a"])(p.value))))}))):_.value=!0};y["a"].on("view-customer-transaction",(function(t){T.value=!0,A.value=t.number,M.value=t.type,C.value.push(T.value)}));var D=Object(h["a"])((function(t){g.value=!0,w.value=t.id,C.value.push(g.value),e.root._router.replace({path:"/user_management/customerlist/:/customer/".concat(w.value)})})),S=Object(h["a"])((function(t){x.value=!0,w.value=t.id,O.value=t.title_name,e.root._router.replace({path:"/user_management/stafflist/:/role/".concat(w.value)})})),I=function(){C.value=[],g.value=!1,k.value=!1,j.value=!1,x.value=!1,T.value=!1},Y=function(){j.value=!0,C.value.push(j.value),e.root._router.replace({path:"/user_management/customerlist/:/addcustomer"})};return Object(m["g"])("customerId",w),Object(m["g"])("currentAccNumber",A),Object(m["g"])("currentAccType",M),Object(m["g"])("staffName",O),Object(s["a"])(Object(s["a"])({},Object(m["j"])(a)),{},{intersected:N,getters_customers:i,viewCustomerBtn:D,items:p,closeDrawer:I,addnewCustomer:Y,roleCustomerBtn:S})}},k=w,j=(a("35aa"),Object(_["a"])(k,r,n,!1,null,"178bd3f1",null));e["default"]=j.exports},eeb3:function(t,e,a){"use strict";a("6868")}}]);
//# sourceMappingURL=chunk-8301b938.56e701d5.js.map